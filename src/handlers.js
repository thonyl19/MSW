import { http, HttpResponse, delay } from 'msw';
import { mockConfig } from './store.js';

export const handlers = [
  http.post('/User/Login', async () => {
    if (mockConfig.apiDelay > 0) await delay(mockConfig.apiDelay);
    if (mockConfig.loginStatus === 'invalid_password') {
      return new HttpResponse(JSON.stringify({ msg: '失敗' }), { status: 401 });
    }
    return HttpResponse.json({ success: true });
  }),
  http.post('*/ADM/Operation/ListData', async ({ request }) => {
    // 模擬網路延遲
    await delay(mockConfig.apiDelay);

    // 根據面板目前的選項決定回傳結果
    if (mockConfig.arg === 'default') {
      return new HttpResponse(
        JSON.stringify({"ID":"e2170b88-7520-4815-ac05-a1c2625520de","Success":true,"Message":null,"MessageList":[],"Redirect":null,"Data":{"gridData":[{"UNIT":null,"OPER_SID":"GTI25070118190666621","OPERATION_NO":"ReceiveRawMaterial","OPERATION":"AAAA","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:19:06","UPDATE_USER":"Dennis","UPDATE_DATE":"2025-08-05 15:13:13","SCRAP_THROW_ATTRSPC":"T","DEFECT_THROW_ATTRSPC":"T"},{"UNIT":null,"OPER_SID":"GTI25070118194466632","OPERATION_NO":"Composition","OPERATION":"配合","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:19:44","UPDATE_USER":"Admin","UPDATE_DATE":"2025-09-18 15:47:28","SCRAP_THROW_ATTRSPC":"F","DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25070118201466644","OPERATION_NO":"Coating","OPERATION":"塗工","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:20:14","UPDATE_USER":"Jordan","UPDATE_DATE":"2026-01-19 15:11:04","SCRAP_THROW_ATTRSPC":"T","DEFECT_THROW_ATTRSPC":"T"},{"UNIT":null,"OPER_SID":"GTI25070118204666655","OPERATION_NO":"Aging","OPERATION":"老化","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:20:46","UPDATE_USER":"Admin","UPDATE_DATE":"2025-09-18 15:47:28","SCRAP_THROW_ATTRSPC":"F","DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25070118221566666","OPERATION_NO":"SlitRewind","OPERATION":"分條/仕上","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:22:15","UPDATE_USER":"Dennis","UPDATE_DATE":"2025-10-01 09:52:50","SCRAP_THROW_ATTRSPC":"F","DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25070118232566677","OPERATION_NO":"OutGoingInspection","OPERATION":"出貨檢查","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:23:25","UPDATE_USER":"Dennis","UPDATE_DATE":"2025-11-17 18:31:33","SCRAP_THROW_ATTRSPC":"F","DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25070118241466686","OPERATION_NO":"Packaging","OPERATION":"捆包","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:24:14","UPDATE_USER":"Dennis","UPDATE_DATE":"2025-11-17 18:31:33","SCRAP_THROW_ATTRSPC":"F","DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25070118245066697","OPERATION_NO":"Storage","OPERATION":"保管","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-07-01 18:24:50","UPDATE_USER":"Admin","UPDATE_DATE":"2025-07-09 11:46:19","SCRAP_THROW_ATTRSPC":null,"DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25082215024191113","OPERATION_NO":"JTestQCInOut","OPERATION":"QC進出測試站","OPER_TYPE_SID":"GTI22071216483591295","OPER_TYPE_VER_SID":"GTI22071216513891302","OPERATION_TYPE":"STD04","OPERATION_TYPE_NAME":"QC進出站","OPERATION_TYPE_CATEGORY":"Q","DESCRIPTION":null,"ENABLE_FLAG":"F","QUOTE_ONCE":"F","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Jordan","CREATE_DATE":"2025-08-22 15:02:41","UPDATE_USER":"Jordan","UPDATE_DATE":"2025-08-22 15:02:41","SCRAP_THROW_ATTRSPC":null,"DEFECT_THROW_ATTRSPC":null},{"UNIT":null,"OPER_SID":"GTI25091815431996568","OPERATION_NO":"shijo","OPERATION":"二次工程","OPER_TYPE_SID":"GTI22071216251591283","OPER_TYPE_VER_SID":"GTI22071216262591285","OPERATION_TYPE":"STD01","OPERATION_TYPE_NAME":"標準進出站","OPERATION_TYPE_CATEGORY":"S","DESCRIPTION":null,"ENABLE_FLAG":"T","QUOTE_ONCE":"T","ATTRIBUTE_01":null,"ATTRIBUTE_02":null,"ATTRIBUTE_03":null,"ATTRIBUTE_04":null,"ATTRIBUTE_05":null,"ATTRIBUTE_06":null,"ATTRIBUTE_07":null,"ATTRIBUTE_08":null,"ATTRIBUTE_09":null,"ATTRIBUTE_10":null,"ATTRIBUTE_11":null,"ATTRIBUTE_12":null,"ATTRIBUTE_13":null,"ATTRIBUTE_14":null,"ATTRIBUTE_15":null,"ATTRIBUTE_16":null,"CREATE_USER":"Admin","CREATE_DATE":"2025-09-18 15:43:19","UPDATE_USER":"Admin","UPDATE_DATE":"2025-09-18 15:47:28","SCRAP_THROW_ATTRSPC":null,"DEFECT_THROW_ATTRSPC":null}],"PageInfo":{"CurrentPage":1,"PageCount":4,"PageSize":10,"RowCount":31}},"Exception":null,"InnerResults":[],"Code":"000"}), 
        { status: 200, headers: { 'Content-Type': 'application/json' } }
      );
    }

    if (mockConfig.arg === 'error') {
      return new HttpResponse(null, { status: 500 });
    }

    // 預設回傳成功
    return HttpResponse.json({ success: true });
  }),
];